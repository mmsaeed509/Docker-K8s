<h3 align="center"> Docker Cheat Sheet </h3>

## Commands

| Docker Command                                                                                           | Command Description                                                                                                            | Example                                                                                                                                                          |
|----------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `docker build <path of docker file>`                                                                     | build img                                                                                                                      | `docker build .`                                                                                                                                                 |
| `docker run <IMAGE_ID or IMAGE_TAG>`                                                                     | run the img                                                                                                                    | `docker run -p 3000:3000 2e1b68f731f5`                                                                                                                           |
| `docker ps` <br> `docker container ls`                                                                   | list all running containers                                                                                                    | `docker ps` <br>  `docker container ls`                                                                                                                          |
| `docker container ls -a` <br> `docker ps -a`                                                             | list all container                                                                                                             | `docker container ls -a` <br> `docker ps -a`                                                                                                                     |
| `docker stop <CONTAINER_ID or CONTAINER_NAME>`                                                           | stop container                                                                                                                 | `docker stop condescending_goodall`                                                                                                                              |
| `docker run -it <CONTAINER_ID or CONTAINER_NAME>`                                                        | interact with the container                                                                                                    | `docker run -it node`                                                                                                                                            |
| `docker run -it <IMAGE_ID or IMAGE_TAG>`                                                                 | interact with the container                                                                                                    | `docker run -it node`                                                                                                                                            |
| `docker ps -a --size`                                                                                    | containers size                                                                                                                | `docker ps -a --size`                                                                                                                                            |
| `docker start <CONTAINER_ID or CONTAINER_NAME>`                                                          | start an existing container                                                                                                    | `docker start 246728e7b25f` or `docker start sharp_albattani`                                                                                                    |
| `docker run <IMAGE_ID or IMAGE_TAG>`                                                                     | create a new container based on an image and start it                                                                          | `docker run b211bbfa3d`                                                                                                                                          |
| `docker attach <CONTAINER_ID or CONTAINER_NAME>`                                                         | Attaching to an already-running Container                                                                                      | `docker attach 246728e7b25f` or `docker attach sharp_albattani`                                                                                                  |
| `docker start -ai <CONTAINER_ID or CONTAINER_NAME>`                                                      | restart container with attached mode (interact with the container)                                                             | `docker start -ai 1ec44b011c54`                                                                                                                                  |
| `docker rm <CONTAINER_ID or CONTAINER_NAME>`                                                             | remove container                                                                                                               | `docker rm 3d5b87482717`                                                                                                                                         |
| `docker container rm <CONTAINER_ID or CONTAINER_NAME>`                                                   | remove container                                                                                                               | `docker container rm 246728e7b25f`                                                                                                                               |
| `docker container prune`                                                                                 | remove all stopped containers                                                                                                  | `docker container prune`                                                                                                                                         |
| `docker container prune -a`                                                                              | remove all  containers                                                                                                         | `docker container prune -a`                                                                                                                                      |
| `docker image ls -a`                                                                                     | lists all the images on the system (including running/not running and tagged/not tagged )                                      | `docker image ls -a`                                                                                                                                             |
| `docker images`                                                                                          | only lists the images that are currently running or tagged                                                                     | `docker images`                                                                                                                                                  |
| `docker image prune`                                                                                     | removes all the unused images (not used by any container)                                                                      | `docker image prune`                                                                                                                                             |
| `docker image prune -a`                                                                                  | removes all images                                                                                                             | `docker image prune -a`                                                                                                                                          |
| `docker cp <src> <des(<CONTAINER_ID:PATH or CONTAINER_NAME:PATH>)>`                                      | Copying Files into a container                                                                                                 | `docker cp git-push.sh sweet_rhodes:/test`                                                                                                                       |
| `docker cp <CONTAINER_ID:PATH or CONTAINER_NAME:PATH> <des>`                                             | Copying Files from a container                                                                                                 | `docker cp sweet_rhodes:/test/git-push.sh ./`                                                                                                                    |
| `docker build . -t <name>:<tag>`                                                                         | build image with tag                                                                                                           | `docker build . -t wolf-node:latest` <br> `docker build . -t wolf-node:13`                                                                                       |
| `docker tag <old-tag> <new-tag>` <br> `docker tag <old-tag> <docker_hub_id/repo_name:tag>`               | rename image                                                                                                                   | `docker tag wolf-node:13 mmsaeed509/wolf-node:latest` <br> `docker tag wolf-node:13 mmsaeed509/wolf-node:16` <br> `docker tag wolf-node:13 mmsaeed509/wolf-node` |
| `docker login`                                                                                           | Login to Docker Hub                                                                                                            | `docker login`                                                                                                                                                   |
| `docker push <img-name>`                                                                                 | push the image                                                                                                                 | `docker push mmsaeed509/wolf-node:latest`                                                                                                                        |
| `docker pull <img-name>:<tag>`                                                                           | Pull Images from Docker Hub                                                                                                    | `docker pull mmsaeed509/wolf-node:15`                                                                                                                            |
| `docker pull <img-name>`                                                                                 | Pull The Latest Images from Docker Hub                                                                                         | `docker pull alpine`                                                                                                                                             |
| `docker volume create <VOLUME_NAME>`                                                                     | Create a named volume                                                                                                          | `docker volume create mydata`                                                                                                                                    |
| `docker run -d -v <VOLUME_NAME>:<DIR_PATH_IN_CONTINAR> <CONTAINER_ID 0R CONTAINER_NAME>`                 | Run a container and mount the named volume                                                                                     | `docker run -d -v mydata:/app/data my-container`                                                                                                                 |
| `docker run -d -v <DIR_PATH_IN_CONTINAR> <CONTAINER_ID 0R CONTAINER_NAME>`                               | Run a container with an anonymous volume                                                                                       | `docker run -d -v /app/data my-container`                                                                                                                        |
| `docker volume rm <VOL_NAME>`                                                                            | delete a specific volume                                                                                                       | `docker volume rm mydata`                                                                                                                                        |
| `docker volume prune` <br> `docker volume rm data logs`                                                  | removes all the unused volume (not used by any container)                                                                      | `docker volume prune` <br> `docker volume rm data logs`                                                                                                          |
| `docker volume prune -a`                                                                                 | removes all volume                                                                                                             | `docker volume prune -a`                                                                                                                                         |
| `docker history <image>`                                                                                 | display the history of a Docker image                                                                                          | `docker history hello-world`                                                                                                                                     |
| `docker build --build-arg <name>=<value> -t <image_name> <path_to_Dockerfile_directory>`                 | Set ARG Values during Build                                                                                                    | `docker build --build-arg APP_VERSION=2.0 -t myapp:latest .`                                                                                                     |
| `docker network create <NETWORK_NAME>`                                                                   | create a new Network                                                                                                           | `docker network create db-network`                                                                                                                               |
| `docker run -network <NETWORK_NAME> --name <CONTAINER_ID 0R CONTAINER_NAME> <IMAGE_ID or IMAGE_TAG>`     | Create Container attached to an existing network                                                                               | `docker run -network my-network --name cont1 my-image`                                                                                                           |
| `docker network create --driver <DRIVER_TYPE> <NETWORK_NAME>`                                            | Create an network with specific Driver                                                                                         | `docker network create --driver bridge my-net`                                                                                                                   |
| `docker compose up` <br> `docker compose up -d` <br> `docker compose down` <br> `docker compose down -v` | run containers <br> run containers in detached mode <br> removing all containers <br> removing all containers with all volumes | `docker compose up` <br> `docker compose up -d` <br> `docker compose down` <br> `docker compose down -v`                                                         |
| `docker exec -it <container_name> <command>`                                                             | to execute command inside the container use `dokcer exec`                                                                      | `docker exec -it node-react npm init`                                                                                                                            |
| `docker compose exec <command>` <br> `docker compose run <service_name> <command>`                       | to execute command inside the container use `dokcer compse`                                                                    | `docker compose exec init` <br> `docker compose run npm init`                                                                                                    |

## Arguments (Parameters)

| Argument                                                                  | Description                                                         | Example                                                      |
|---------------------------------------------------------------------------|---------------------------------------------------------------------|--------------------------------------------------------------|
| `-i` for interactive                                                      | to interact with the container                                      | `docker run -i 22396067`                                     |
| `-t` for terminal                                                         | to allocate a pseudo TTY(terminal)                                  | `docker run -t 22396067`                                     |
| `-it`                                                                     | interact and allocate TTY                                           | `docker run -it 22396067`                                    |
| `-a` for attach                                                           | start/restart container with attached mode                          | `docker start -a 22396067`                                   |
| `-d` for detach                                                           | start/restart container with detach mode                            | `docker start -d 22396067`                                   |
| `--rm`                                                                    | remove container Automatically when it stopped                      | `docker run -p 3000:3000 2e1b68f731f5 --rm`                  |
| `-t` for tag <br>(`name`:`tag`)                                           | Tagging Images (`tag` can be a word or a number, totally up to you) | `docker tag wolf-node:13 mmsaeed509/wolf-node:latest`        |
| `-v` <br> `--volume`                                                      | specify the bind mount Volume                                       | `-v /host-path:/container-path`                              |
| `--build-arg` <br> `<name>`: argument name <br> `<value>`: argument value | Set ARG Values during Build                                         | `docker build --build-arg APP_VERSION=2.0 -t myapp:latest .` |
| `-network` for network                                                    | create a network                                                    | `docker network create db-network`                           |


___

`CMD` and `ENTRYPOINT` are both instructions used in Docker to specify how a container should behave when it is run, but they serve different purposes and have distinct characteristics:

1. CMD:

- The `CMD` instruction is used to provide default arguments for an executable when the container is run. It specifies the command to run within the container, along with any arguments. These arguments can be overridden when the container is started.

- The `CMD` instruction is typically used to define the main application that should run inside the container.

- If the Dockerfile contains multiple `CMD` instructions, only the last one takes effect, as it will overwrite any previous `CMD` instructions.

- The `CMD` instruction can be overridden when starting the container using the `docker run` command by specifying a new command and its arguments as parameters.

- Example:
  ```Dockerfile
  CMD ["python", "app.py"]
  ```

2. ENTRYPOINT:

- The `ENTRYPOINT` instruction is used to set the primary command that should be executed when the container starts. It also allows you to provide default arguments that can be overridden when the container is run.

- When `ENTRYPOINT` is used, any command-line arguments passed when running the container are treated as arguments to the `ENTRYPOINT` command.

- The `CMD` instruction can be used in conjunction with `ENTRYPOINT`. When both are present in a Dockerfile, the `CMD` arguments will be appended to the `ENTRYPOINT` command, allowing you to create a more flexible container where the primary command is defined by `ENTRYPOINT`, and additional arguments can be provided using `CMD`.

- Example:
  ```Dockerfile
  ENTRYPOINT ["python", "app.py"]
  CMD ["--debug"]
  ```

In summary, the key difference is that `CMD` is used to specify the default command and arguments for a container, while `ENTRYPOINT` is used to define the main executable command that should run when the container starts, and `CMD` can be used to provide default arguments. You can override both `CMD` and `ENTRYPOINT` when running a container if needed, allowing for flexibility and customization.

<ins>For Example:</ins>

`ENTRYPOINT` allows you to run the command `init` instead of `npm init`, or `install` instead of `npm install` as we set `ENTRYPOINT ["npm"]`
